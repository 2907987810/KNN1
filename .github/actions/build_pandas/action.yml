name: Build pandas
description: Rebuilds the C extensions and installs pandas
runs:
  using: composite
  steps:

    - name: Environment Detail
      run: |
        conda info
        conda list
      shell: bash -l {0}

    - name: Switching (possibly gen) the locale
      run: |
        less /usr/share/i18n/SUPPORTED
        sudo locale-gen ${LANG}
        sudo update-locale LANG=${LANG}
      shell: bash -l {0}

    - name: Locale test with date print
      run: |
        date
      shell: bash -l {0}

    - name: Build Pandas
      run: |
        python setup.py build_ext -j 2
        python -m pip install -e . --no-build-isolation --no-use-pep517 --no-index
      shell: bash -l {0}
