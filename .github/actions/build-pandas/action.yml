name: Build pandas
description: Rebuilds the C extensions and installs pandas
runs:
  using: composite
  steps:
    - name: Set up Ccache
      uses: ./.github/actions/setup-ccache

    - name: Build Pandas
      if : ${{ runner.os != 'Windows' }}
      run: |
        python -m pip install . --no-build-isolation -v
      shell: bash -el {0}

    - name: Build Pandas (Windows)
      if: ${{ runner.os == 'Windows' }}
      run: |
        call micromamba activate test
        call "C:\Program Files\Microsoft Visual Studio\2022\Enterprise\VC\Auxiliary\Build\vcvars64.bat"
        python -m pip install -e . --no-build-isolation -v
      shell: cmd /C call {0}
