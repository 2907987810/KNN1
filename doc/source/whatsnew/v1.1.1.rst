.. _whatsnew_111:

What's new in 1.1.1 (??)
------------------------

These are the changes in pandas 1.1.1. See :ref:`release` for a full changelog
including other versions of pandas.


.. ---------------------------------------------------------------------------

Enhancements
~~~~~~~~~~~~

.. _whatsnew_111.stratified_sample:

Stratified Sampling in Pandas
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

We've added :meth:`~DataFrame.stratified_sample` for sampling a DataFrame object using strata.

A stratified sample is used when it is desired to keep the same proportions of the variables in the original population when sampling.

For example:

.. code-block:: ipython

  In [1]: df = pd.DataFrame({'gender': ['male', 'male', 'female', 'female', 'female',
  ...                                 'female', 'female', 'female', 'male', 'male'],
  ...                     'age': [25, 26, 25, 26, 30, 25, 25, 30, 30, 25],
  ...                     'country': ['US', 'CAN', 'MEX', 'CAN', 'IN', 'CAN',
  ...                                 'CAN', 'US', 'CAN', 'IN'],
  ...                     'income_K' : [100, 110, 99, 110, 110, 100, 100, 110,
  ...                                   100, 99]}
  )
  In [2]: df.stratified_sample(strata=['age'], n=5, random_state=0, reset_index=True)
  Out[2]:
     gender  age country  income_K
  0  female   25     CAN       100
  1    male   25      US       100
  2  female   26     CAN       110
  3    male   30     CAN       100
  4  female   30      US       110

We've also added :meth:`~DataFrame.stratified_sample_counts` to return the counts that would be generated by a stratified sampling.

.. code-block:: ipython

  In [1]: df = pd.DataFrame({'gender': ['male', 'male', 'female', 'female', 'female',
  ...                                 'female', 'female', 'female', 'male', 'male'],
  ...                     'age': [25, 26, 25, 26, 30, 25, 25, 30, 30, 25],
  ...                     'country': ['US', 'CAN', 'MEX', 'CAN', 'IN', 'CAN',
  ...                                 'CAN', 'US', 'CAN', 'IN'],
  ...                     'income_K' : [100, 110, 99, 110, 110, 100, 100, 110,
  ...                                   100, 99]}
  )
  In [2]: df.stratified_sample_counts(strata=['age'], n=5)
  Out[2]:
     age  size  sample_size
  0   25     5            2
  1   26     2            1
  2   30     3            2


.. _whatsnew_111.contributors:

Contributors
~~~~~~~~~~~~
* Flavio Bossolan +
